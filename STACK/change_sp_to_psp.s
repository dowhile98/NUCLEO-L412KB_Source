SRAM_START 		EQU 	0x20000000
SRAM_SIZE 		EQU		(96 * 1024)
SRAM_END 		EQU		( (SRAM_START) + (SRAM_SIZE) )	
STACK_START		EQU 	SRAM_END


STACK_MSP_START	EQU 	STACK_START
STACK_MSP_END	EQU		(STACK_MSP_START - 512)
STACK_PSP_START	EQU		STACK_MSP_END

		AREA |.txt|,CODE,READONLY
		EXPORT change_sp_to_psp
		ALIGN
			
; this function changes SP to PSP 

change_sp_to_psp	PROC
		LDR R0,=STACK_MSP_END
		MSR PSP, R0
		MOV R0,#0X02
		MSR CONTROL,R0
		BX LR
		ENDP
		END